- name: Gather the package facts
  package_facts:
    manager: auto

- name: Configure dircolors
  include_tasks: dir_colors.yml

- name: Configure fonts
  include_tasks: fonts.yml
  when: "'fontconfig' in ansible_facts.packages"

- name: Configure alacritty
  file:
    src: "{{ role_path }}/files/alacritty"
    dest: $HOME/.config/alacritty
    state: link
  when: "'alacritty' in ansible_facts.packages"

- name: Configure editorconfig
  file:
    src: "{{ role_path }}/files/editorconfig/editorconfig"
    dest: $HOME/.editorconfig
    state: link

- name: Configure fish
  include_tasks: fish.yml
  when: "'fish' in ansible_facts.packages"

- name: Configure git
  file:
    src: "{{ role_path }}/files/git/gitconfig"
    dest: $HOME/.gitconfig
    state: link

- name: Configure neovim
  file:
    src: "{{ role_path }}/files/nvim"
    dest: $HOME/.config/nvim
    state: link
  when: "'neovim' in ansible_facts.packages"

- name: Configure ssh
  include_tasks: ssh.yml

- name: Configure tmux
  include_tasks: tmux.yml
  when: "'tmux' in ansible_facts.packages"

- name: Configure distrobox
  include_tasks: distrobox.yml

- name: Configure desktop
  include_tasks: desktop/main.yml
  when: ansible_env.DISPLAY is defined
