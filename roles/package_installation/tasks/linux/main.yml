- name: Include Debian related tasks
  include_tasks: debian/main.yml
  args:
    apply:
      become: true
  when: ansible_os_family == "Debian"

- name: Include RedHat related tasks
  include_tasks: redhat/main.yml
  args:
    apply:
      become: true
  when: ansible_os_family == "RedHat"

- name: Enable systemd services
  systemd:
    name: "{{ item }}"
    enabled: true
    state: started
  loop: "{{ enabled_services }}"
  when: enabled_services is defined

- name: Include Flatpak tasks
  include_tasks: linux/flatpak.yml
